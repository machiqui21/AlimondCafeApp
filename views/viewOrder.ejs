<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Order #<%= (header && (header.OrderID || header.ID)) %></title>
  <link rel="stylesheet" href="/menu.css">
</head>
<body>
  <header class="hero">
    <img class="logo" src="/images/AlimondsCafe.jpeg">
    <h1>Order #<%= (header && (header.OrderID || header.ID)) %></h1>
    <h3><%= header && header.StatusDescription ? header.StatusDescription : 'Pending' %></h3>
  </header>

  <main style="max-width: 900px; margin: 16px auto;">
    <section style="background:#fff; border-radius:8px; padding:12px 16px; box-shadow:0 2px 12px rgba(0,0,0,0.06);">
      <div style="display:flex; gap:16px; flex-wrap:wrap;">
        <div><strong>Customer:</strong> <%= header && header.CustomerName || '-' %></div>
        <div><strong>Date:</strong> <%= header && (header.CreatedAt || header.Created_at || header.created_at) %></div>
        <div><strong>Total:</strong> ₱<%= (parseFloat(header && header.TotalAmount || 0)||0).toFixed(2) %></div>
        <div style="margin-left:auto;"><a class="btn" href="/payment?method=cash&orderId=<%= (header && (header.OrderID||header.ID)) %>">Pay Cash</a> <a class="btn" href="/payment?method=online&orderId=<%= (header && (header.OrderID||header.ID)) %>">Pay Online</a></div>
      </div>
    </section>

    <section style="margin-top:16px;">
      <table class="menu-table" style="width:100%;">
        <thead>
          <tr>
            <th>#</th>
            <th>Product</th>
            <th>Qty</th>
            <th>Price/Item</th>
            <th>Line Total</th>
          </tr>
        </thead>
        <tbody>
          <% (items||[]).forEach(function(it, idx){ %>
            <tr>
              <td><%= idx+1 %></td>
              <td><%= it.ProductName || ('#'+(it.ProductID||'')) %></td>
              <td><%= it.qty %></td>
              <td>₱<%= (parseFloat(it.Price||0)||0).toFixed(2) %></td>
              <td>₱<%= (parseFloat(it.LineTotal||0)||0).toFixed(2) %></td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    </section>

    <section style="margin-top:16px; display:flex; gap:16px; flex-wrap:wrap;">
      <% var opts = optionsByType || {}; %>
      <div style="flex:1 1 260px; background:#fff; padding:12px 16px; border-radius:8px; box-shadow:0 2px 12px rgba(0,0,0,0.06);">
        <h3>Sweetener</h3>
        <% if (opts.Sweetener && opts.Sweetener.length) { %>
          <ul>
            <% opts.Sweetener.forEach(function(o){ %>
              <li><%= o.name %> <small>(₱<%= (parseFloat(o.price||0)||0).toFixed(2) %>)</small></li>
            <% }); %>
          </ul>
        <% } else { %>
          <div class="empty">None</div>
        <% } %>
      </div>

      <div style="flex:1 1 260px; background:#fff; padding:12px 16px; border-radius:8px; box-shadow:0 2px 12px rgba(0,0,0,0.06);">
        <h3>Milk</h3>
        <% if (opts.Milk && opts.Milk.length) { %>
          <ul>
            <% opts.Milk.forEach(function(o){ %>
              <li><%= o.name %> <small>(₱<%= (parseFloat(o.price||0)||0).toFixed(2) %>)</small></li>
            <% }); %>
          </ul>
        <% } else { %>
          <div class="empty">None</div>
        <% } %>
      </div>

      <div style="flex:1 1 260px; background:#fff; padding:12px 16px; border-radius:8px; box-shadow:0 2px 12px rgba(0,0,0,0.06);">
        <h3>Toppings</h3>
        <% if (opts.Toppings && opts.Toppings.length) { %>
          <ul>
            <% opts.Toppings.forEach(function(o){ %>
              <li><%= o.name %> <small>(₱<%= (parseFloat(o.price||0)||0).toFixed(2) %>)</small></li>
            <% }); %>
          </ul>
        <% } else { %>
          <div class="empty">None</div>
        <% } %>
      </div>
    </section>

    <div style="margin-top:16px; display:flex; gap:12px;">
      <a class="btn" href="/menu">Back to Menu</a>
      <a class="btn" href="/order-summary">Back to Summary</a>
    </div>
  </main>
</body>
</html>
